<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GKCCI Privacy Policy Dashboard</title>
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/responsive.css">
    
    <!-- External Dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <header class="header">
            <div class="header-content">
                <div class="header-main">
                    <h1>GKCCI Privacy Policy Dashboard</h1>
                    <p>Colgate University √ó University of Iowa Collaboration</p>
                    <p>Data Labeling Consistency Analysis & Gold Standard Creation</p>
                </div>
                <div class="user-info">
                    <div class="user-avatar" id="userAvatar">üë§</div>
                    <div class="user-details">
                        <div class="user-name" id="userName">Welcome!</div>
                        <div class="user-role" id="userRole">Select your details below</div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Student Selection Section -->
        <section class="student-selection" style="background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border-radius: 20px; padding: 25px; margin-bottom: 30px; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);">
            <h3 style="color: #2d3748; margin-bottom: 20px;">üë®‚Äçüéì Student Information & Policy Selection</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 20px;">
                <div>
                    <label for="studentName" style="font-weight: bold; color: #2d3748; display: block; margin-bottom: 8px;">Your Name:</label>
                    <input type="text" id="studentName" placeholder="Enter your full name" style="width: 100%; padding: 10px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px;">
                </div>
                <div>
                    <label for="studentEmail" style="font-weight: bold; color: #2d3748; display: block; margin-bottom: 8px;">Email (Optional):</label>
                    <input type="email" id="studentEmail" placeholder="your.email@uiowa.edu" style="width: 100%; padding: 10px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px;">
                </div>
                <div>
                    <label for="university" style="font-weight: bold; color: #2d3748; display: block; margin-bottom: 8px;">University:</label>
                    <select id="university" style="width: 100%; padding: 10px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 14px;">
                        <option value="">Select University</option>
                        <option value="University of Iowa">University of Iowa</option>
                        <option value="Colgate University">Colgate University</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
            </div>
            
            <div style="margin-bottom: 20px;">
                <label for="policyCategory" style="font-weight: bold; color: #2d3748; display: block; margin-bottom: 8px;">üìã Policy Category:</label>
                <select id="policyCategory" style="width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 16px; background: white;">
                    <option value="">Select Policy Category to Annotate</option>
                    <option value="social-media">Social Media Platforms (Facebook, Twitter, Instagram)</option>
                    <option value="ecommerce">E-commerce & Shopping (Amazon, eBay, Online Stores)</option>
                    <option value="healthcare">Healthcare & Medical Services</option>
                    <option value="financial">Financial Services & Banking</option>
                    <option value="education">Educational Platforms & EdTech</option>
                    <option value="gaming">Gaming & Entertainment</option>
                    <option value="cloud-storage">Cloud Storage & File Sharing</option>
                    <option value="mobile-apps">Mobile Apps & Services</option>
                    <option value="streaming">Video/Music Streaming Services</option>
                    <option value="government">Government & Public Services</option>
                    <option value="travel">Travel & Transportation</option>
                    <option value="other">Other Policy Type</option>
                </select>
            </div>

            <div id="selectedInfo" style="display: none; background: linear-gradient(45deg, #48bb78, #38a169); color: white; padding: 15px; border-radius: 10px; text-align: center;">
                <strong id="selectedText">Ready to upload annotations!</strong>
            </div>
        </section>

        <!-- Upload Section -->
        <section class="upload-section">
            <div class="upload-methods">
                <!-- JSON Paste -->
                <div class="upload-method">
                    <h3>üìã Paste JSON Data</h3>
                    <textarea id="jsonPaste" placeholder="Paste your Label Studio export JSON here..." rows="4" disabled></textarea>
                    <button onclick="processJSONPaste()" disabled>Process JSON</button>
                </div>

                <!-- File Upload -->
                <div class="upload-method">
                    <h3>üìÅ Upload Label Studio Export</h3>
                    <div class="upload-area" onclick="document.getElementById('fileInput').click()">
                        <p>Please select your name and policy category first</p>
                        <small>Supports: Label Studio JSON export, annotations export, task export</small>
                        <input type="file" id="fileInput" accept=".json" style="display: none;" onchange="handleFileUpload(event)">
                    </div>
                </div>

                <!-- API Connection -->
                <div class="upload-method">
                    <h3>üì° Connect to Label Studio API</h3>
                    <div class="api-connection">
                        <input type="url" id="labelStudioUrl" placeholder="Label Studio URL (e.g., http://localhost:8080)" value="http://localhost:8080">
                        <input type="password" id="apiToken" placeholder="API Token (from Account & Settings)">
                        <select id="projectId">
                            <option value="">Select Project</option>
                        </select>
                        <button onclick="fetchFromAPI()">Fetch Live Data</button>
                    </div>
                </div>
            </div>

            <!-- Upload Status -->
            <div class="upload-status" id="uploadStatus" style="display: none;">
                <div class="status-content">
                    <div class="status-icon">‚è≥</div>
                    <div class="status-text">Processing data...</div>
                    <div class="status-details"></div>
                </div>
            </div>
        </section>

        <!-- Policy Upload Tracking Section -->
        <section class="policy-tracking" id="policyTracking" style="display: none; background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border-radius: 20px; padding: 25px; margin-bottom: 30px; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);">
            <h3 style="color: #2d3748; margin-bottom: 20px;">üìÅ Uploaded Annotations by Policy Category</h3>
            <div id="policyTrackingContent">
                <!-- This will be populated with uploaded files by category -->
            </div>
        </section>

        <!-- Simple Filter Controls -->
        <section class="controls">
            <div class="control-group">
                <label for="projectSelect">Filter by Policy Category:</label>
                <select id="projectSelect">
                    <option value="all">All Policy Categories</option>
                    <option value="social-media">Social Media Platforms</option>
                    <option value="ecommerce">E-commerce & Shopping</option>
                    <option value="healthcare">Healthcare & Medical Services</option>
                    <option value="financial">Financial Services & Banking</option>
                    <option value="education">Educational Platforms & EdTech</option>
                    <option value="gaming">Gaming & Entertainment</option>
                    <option value="cloud-storage">Cloud Storage & File Sharing</option>
                    <option value="mobile-apps">Mobile Apps & Services</option>
                    <option value="streaming">Video/Music Streaming Services</option>
                    <option value="government">Government & Public Services</option>
                    <option value="travel">Travel & Transportation</option>
                    <option value="other">Other Policy Type</option>
                </select>

                <label for="studentFilter">Filter by Student:</label>
                <select id="studentFilter">
                    <option value="all">All Students</option>
                </select>

                <button onclick="applyFilters()">Apply Filters</button>
            </div>
        </section>

        <!-- Data Summary -->
        <section class="data-summary" id="dataSummary" style="display: none;">
            <h3>üìä Current Dataset Summary</h3>
            <div class="summary-grid">
                <div class="summary-item">
                    <strong id="taskCount">0</strong>
                    <span>Tasks</span>
                </div>
                <div class="summary-item">
                    <strong id="annotationCount">0</strong>
                    <span>Annotations</span>
                </div>
                <div class="summary-item">
                    <strong id="annotatorCount">0</strong>
                    <span>Annotators</span>
                </div>
                <div class="summary-item">
                    <strong id="labelTypeCount">0</strong>
                    <span>GKCCI Parameters</span>
                </div>
            </div>
        </section>

        <!-- Dashboard Charts -->
        <section class="dashboard">
            <div class="chart-container">
                <div class="chart-title">GKCCI Parameter Distribution</div>
                <canvas id="labelChart"></canvas>
            </div>

            <div class="chart-container">
                <div class="chart-title">Inter-Annotator Agreement</div>
                <canvas id="consistencyChart"></canvas>
            </div>
        </section>

        <!-- Consistency Metrics -->
        <section class="consistency-metrics">
            <div class="chart-title">GKCCI Annotation Quality Metrics</div>
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value" id="overallAgreement">85.2%</div>
                    <div class="metric-label">Overall Agreement</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="kappaScore">0.78</div>
                    <div class="metric-label">Cohen's Kappa</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="totalLabels">1,247</div>
                    <div class="metric-label">Total Annotations</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="activeAnnotators">8</div>
                    <div class="metric-label">Law Students</div>
                </div>
            </div>
        </section>

        <!-- Detailed View -->
        <section class="detailed-view">
            <div class="chart-title">Annotation Performance by Policy Category</div>
            <div id="policyPerformance">
                <!-- This will show performance organized by policy category -->
            </div>
        </section>

        <!-- Student Performance View -->
        <section class="detailed-view" style="margin-top: 30px;">
            <div class="chart-title">Individual Student Performance</div>
            <div id="studentDetails">
                <!-- This will be populated by JavaScript with individual student performance data -->
            </div>
        </section>
    </div>

    <!-- JavaScript Files -->
    <script src="js/utils.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/labelstudio.js"></script>
    <script src="js/main.js"></script>
</body>
</html>